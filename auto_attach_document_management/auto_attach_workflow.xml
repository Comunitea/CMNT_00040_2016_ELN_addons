<?xml version="1.0" encoding="UTF-8"?>

<openerp>
    <data>
        <record model="workflow.activity" id="auto_attach.verified">
            <field name="wkf_id" ref="auto_attach.wkf_nan_document"/>
            <field name="name">verified</field>
            <field name="action">verified_document()&#10;write({'state':'verified'})</field>
            <field name="kind">function</field>
        </record>
        <record model="workflow.activity" id="auto_attach.processed">
            <field name="wkf_id" ref="auto_attach.wkf_nan_document"/>
            <field name="flow_stop">True</field>
            <field name="name">processed</field>
            <field name="action">write({'state':'processed'})&#10;process_document()</field>
            <field name="kind">function</field>
        </record>
        <record model="workflow.activity" id="filed_document">
            <field name="wkf_id" ref="auto_attach.wkf_nan_document"/>
            <field name="flow_stop">True</field>
            <field name="name">filed</field>
            <field name="action">write({'state':'filed'})</field>
            <field name="kind">function</field>
        </record>
        <record model="workflow.activity" id="auto_attach.analyzed">
            <field name="wkf_id" ref="auto_attach.wkf_nan_document"/>
            <field name="name">analyzed</field>
            <field name="action">analyze_document()</field>
            <field name="kind">function</field>
        </record>

        <record model="workflow.activity" id="exception">
            <field name="wkf_id" ref="auto_attach.wkf_nan_document"/>
            <field name="name">exception</field>
            <field name="action">write({'state':'exception'})</field>
            <field name="kind">function</field>
        </record>
              
        <record model="workflow.transition" id="t10">
            <field name="act_from" ref="auto_attach.verified"/>
            <field name="act_to" ref="filed_document"/>
            <field name="condition">annex==True</field>
        </record>

        <record model="workflow.transition" id="t11">
            <field name="act_from" ref="auto_attach.verified"/>
            <field name="act_to" ref="exception"/>
            <field name="condition">property_ids == []</field>
        </record>

        <record model="workflow.transition" id="t12">
            <field name="act_from" ref="auto_attach.analyzed"/>
            <field name="act_to" ref="exception"/>
            <field name="condition">property_ids == [] and counter &gt; scan_queue_id.no_attempts</field>
        </record>
         <record model="workflow.transition" id="t13">
            <field name="act_from" ref="auto_attach.analyzed"/>
            <field name="act_to" ref="exception"/>
            <field name="condition">except_state==True</field>
        </record>
        
    </data>
</openerp>
