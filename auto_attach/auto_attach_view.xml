<?xml version="1.0"?>
<openerp>
        <data>
    <menuitem name="Auto Attach" id="auto_attach_menu" />
    <menuitem name="Configuration" id="auto_attach_config_menu"
                parent="auto_attach_menu" sequence="1" />
    
            
    <!--  Record scan queue view -->
    <record model="ir.ui.view" id="view_scan_queue_tree">
        <field name="name">scan.queue.tree</field>
        <field name="model">scan.queue</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Record Scan Queue">
                <field name="name" />
                <field name="resolution" />
            </tree>
        </field>
    </record>

    <record model="ir.ui.view" id="view_scan_queue_form">
        <field name="name">scan.queue.form</field>
        <field name="model">scan.queue</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Record Scan Queue">
                <field name="name" />
                <field name="resolution"/>
                <field name="ir_sequence" domain="[('code','=','scan_queue')]"/>
                <field name="directory" />
                <group colspan="4" attrs="{'invisible':[('directory','!=',1)]}" >
                    <field name="file_directory"/>
                    <button name="upload_file_queue"  string="Upload" type="object"/>
                    <newline/>
                    <field name="processed_file_directory"/>
                    <field name="ko_file_directory"/>                    
                </group>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="view_scan_queue_action">
            <field name="name">Scan Queues</field>
            <field name="res_model">scan.queue</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    <menuitem name="Scan Queues" id="scan_queues_menu_id"
            parent="auto_attach_config_menu"
            action="view_scan_queue_action" />


    <record model="ir.ui.view" id="view_scan_queue_upload_form">
        <field name="name">scan.queue.upload.form</field>
        <field name="model">scan.queue.upload.wizard</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Upload Scan Queue">
                <field name="queue_id" widget="selection" />
                <group colspan="4" col="2">
                    <button name="action_accept" string="Upload" type="object"/> 
                    <button name="action_cancel" string="Cancel" type="object"/>
                </group>
            </form>
        </field>
    </record>
  
     <record model="ir.actions.act_window" id="view_scan_queue_upload_action">
            <field name="name">Upload Queues</field>
            <field name="res_model">scan.queue.upload.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

    <menuitem name="Upload Files On Queues" id="scan_upload_queues_menu_id"
            parent="auto_attach_menu"
            action="view_scan_queue_upload_action" />

    <!--  Record Document Scanned -->
    <record model="ir.ui.view" id="view_scan_document_tree">
        <field name="name">scan.document.tree</field>
        <field name="model">scan.document</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Scanned Document">
                <field name="upload_date"/>
                <field name="sequence" />
                <field name="name" />
                <field name="filename" />
                <field name="task" />
                <field name="scan_queue_id" />
                <field name="state" />
            </tree>
        </field>
    </record>
    
        <record model="ir.ui.view" id="view_scan_document_form">
                <field name="name">record.scanned.form</field>
                <field name="model">scan.document</field>
                <field name="type">form</field>
                <field name="arch" type="xml">
                        <form string="Documents in queue">
                                <notebook>
                                        <page string="General">
                                                <field name="name" select="1" />
                                                <field name="sequence" />
                                                <field name="upload_date"/>                                       
                                                <field name="scan_queue_id" />
                                                <field name="state" select="1" />
                                                <group col="6" colspan="4">
                                                        <field name="template_id" select="1" />
                                                        <field name="document_id" select="1" />
                                                        <field name="attachment_id" select="2" />
                                                </group>
                                                <separator string="Task" colspan="4" />
                                                <field name="task" nolabel="1" colspan="4" select="2" />
                                                <separator string="Image" colspan="4" />
                                                <field name="data" widget="image" filename="filename"
                                                        img_width="300" img_height="300" nolabel="1" colspan="4" />
                                                <field name="filename" colspan="4" select="2" />
                                                <group colspan="4">
                                                        <button name="analyze_document" states="pending" string="Analyze document" />
                                                        <button name="pending_to_analyzing" states="pending"
                                                                string="Analyze document in the background" />
                                                        <button name="verify_document" states="analyzed" string="Verify document" />
                                                        <button name="analyzed_to_pending" states="analyzed"
                                                                string="Back to pending" />
                                                        <button name="process_document" states="verified" string="Process document" />
                                                        <button name="verified_to_processing" states="verified"
                                                                string="Process document in the background" />
                                                        <button name="verified_to_analyzed" states="verified"
                                                                string="Unset verified" />
                                                </group>
                                        </page>
                                        <page string="Properties">
                                                <field name="property_ids" nolabel="1">
                                                        <form string="Properties">
                                                                <field name="name" />
                                                                <field name="value" />
                                                                <field name="template_box_id" />
                                                        </form>
                                                        <tree string="Properties">
                                                                <field name="name" />
                                                                <field name="value" />
                                                                <field name="template_box_id" />
                                                        </tree>
                                                </field>
                                        </page>
                                </notebook>
                        </form>
                </field>
        </record>

         <record id="scan_documents_search" model="ir.ui.view">
            <field name="name">scan.document.search</field>
            <field name="model">scan.document</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Scan documents">
                    <group col="8" colspan="4">
                        <field name="name" select="1"/>
                        <field name="filename"/>
                    </group>
                    <newline/>
                    <group  expand='0' string='Group by...' groups="base.group_extended">
                       <filter string='State' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'state'}" />
                    </group>
                </search>
            </field>
        </record>



        <record model="ir.actions.act_window" id="all_scan_document_tree">
            <field name="name">Documents Scanned</field>
            <field name="res_model">scan.document</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
                
                <!--<record model="ir.actions.act_window" id="pending_scan_document_tree">
                        <field name="name">Pending Documents Scanned</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','pending')]</field>
                </record>

                <record model="ir.actions.act_window" id="analyzing_scan_document_tree">
                        <field name="name">Documents Scanned Being Analyzed</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','analyzing')]</field>
                </record>

                <record model="ir.actions.act_window" id="analyzed_scan_document_tree">
                        <field name="name">Analyzed Documents Scanned</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','analyzed')]</field>
                </record>

                <record model="ir.actions.act_window" id="verified_scan_document_tree">
                        <field name="name">Verified Documents Scanned</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','verified')]</field>
                </record>

                <record model="ir.actions.act_window" id="processing_scan_document_tree">
                        <field name="name">Documents Scanned Being Processed</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','processing')]</field>
                </record>

                <record model="ir.actions.act_window" id="processed_scan_document_tree">
                        <field name="name">Processed Documents Scanned</field>
                        <field name="res_model">scan.document</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                        <field name="domain">[('state','=','processed')]</field>
                </record>-->

        <menuitem name="Document Queue" id="document_queue_parent_menu" parent="auto_attach_menu" sequence="2"/>
        <menuitem name="Document Queue" action="all_scan_document_tree"
            id="document_queue_menu" parent="document_queue_parent_menu" sequence="2" />
            
        <!--<menuitem name="Pending" action="pending_scan_document_tree" id="document_pending_menu"
            parent="document_queue_menu" sequence="1" />
        <menuitem name="Being Analyzed" action="analyzing_scan_document_tree"
            id="document_analyzing_menu" parent="document_queue_menu" sequence="2" />
        <menuitem name="Analyzed" action="analyzed_scan_document_tree" id="document_analyzed_menu"
            parent="document_queue_menu" sequence="3" />
        <menuitem name="Verified" action="verified_scan_document_tree" id="document_verified_menu"
            parent="document_queue_menu" sequence="4" />
        <menuitem name="Being Processed" action="processing_scan_document_tree"
            id="document_processing_menu" parent="document_queue_menu" sequence="5" />
        <menuitem name="Processed" action="processed_scan_document_tree"
            id="document_processed_menu" parent="document_queue_menu" sequence="6" />-->
                <!-- Template views -->

                <record model="ir.ui.view" id="view_template_tree">
                        <field name="name">scan.template.tree</field>
                        <field name="model">scan.template</field>
                        <field name="type">tree</field>
                        <field name="arch" type="xml">
                                <tree string="Document Templates">
                                        <field name="name" />
                                        <field name="box_ids" />
                                </tree>
                        </field>
                </record>
                <record model="ir.ui.view" id="view_template_form">
                        <field name="name">scan.template.form</field>
                        <field name="model">scan.template</field>
                        <field name="type">form</field>
                        <field name="arch" type="xml">
                                <form string="Document Templates">
                                        <field name="name" select="1" />
                                        <field name="attach_function" select="1" />
                                        <field name="action_function" select="1" />
                                        <field name="analysis_function" select="2" />
                                        <newline />
                                        <field name="box_ids" mode="tree,form" colspan="4" nolabel="1">
                                                <form string="Boxes">
                                                        <field name="name" />
                                                        <field name="text" />
                                                        <field name="recognizer" />
                                                        <field name="type" />
                                                        <field name="filter" />
                                                        <separator string="Dimensions" colspan="4" />
                                                        <field name="x" />
                                                        <field name="width" />
                                                        <field name="y" />
                                                        <field name="height" />
                                                        <separator string="Feature Dimensions" colspan="4" />
                                                        <field name="feature_x" />
                                                        <field name="feature_width" />
                                                        <field name="feature_y" />
                                                        <field name="feature_height" />
                                                </form>
                                                <tree string="Boxes">
                                                        <field name="name" />
                                                        <field name="text" />
                                                        <field name="recognizer" />
                                                        <field name="type" />
                                                        <field name="filter" />
                                                        <field name="x" />
                                                        <field name="y" />
                                                        <field name="width" />
                                                        <field name="height" />
                                                </tree>
                                        </field>
                                </form>
                        </field>
                </record>

                <record model="ir.actions.act_window" id="view_template_action">
                        <field name="name">Templates</field>
                        <field name="res_model">scan.template</field>
                        <field name="view_type">form</field>
                        <field name="view_mode">tree,form</field>
                </record>

        
                <menuitem name="Templates" action="view_template_action" id="template_menu"
                        parent="auto_attach_config_menu" />
                
        </data>
</openerp>
